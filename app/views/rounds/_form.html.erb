<div class="flex justify-center w-full">
  <%= form_with model: Guess.new, 
      url: new_guess_path(@round.id), 
      class: "w-full group",
      data: {
        turbo_frame: dom_id(@round),
        controller: 'form',
        action: 'turbo:submit-end->form#onResponse'
      } do |form| %>
    <div class="flex gap-x-3 w-full">
      <div class="flex-grow">
        <%= form.label :message, class: "visually-hidden" %>
        <%= form.text_field :message, 
            required: true, 
            placeholder: "Ask a question", 
            autofocus: true,
            maxlength: 100,
            class: "block w-full rounded-md border-0 py-2.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-blue-400 sm:text-sm sm:leading-6 user_guess"
        %>
      </div>
      <%= button_tag(
          type: 'submit', 
          class: 'rounded-md bg-green-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-green-700 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:cursor-not-allowed'
          ) do %>
          <div class="group-aria-busy:block hidden">
            <svg xmlns="http://www.w3.org/2000/svg" class="size-6" viewBox="0 0 200 200"><circle fill="#FFFFFF" stroke="#FFFFFF" stroke-width="15" r="15" cx="40" cy="100"><animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;" keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="-.4"></animate></circle><circle fill="#FFFFFF" stroke="#FFFFFF" stroke-width="15" r="15" cx="100" cy="100"><animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;" keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="-.2"></animate></circle><circle fill="#FFFFFF" stroke="#FFFFFF" stroke-width="15" r="15" cx="160" cy="100"><animate attributeName="opacity" calcMode="spline" dur="2" values="1;0;1;" keySplines=".5 0 .5 1;.5 0 .5 1" repeatCount="indefinite" begin="0"></animate></circle></svg>
          </div>

          <div class="group-aria-busy:hidden flex gap-x-2 items-center">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5" />
            </svg>
            Submit
          </div>
      <% end %>
    </div>
  <%  end %>
</div>
